<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Inventario - Invitado</title>
  <link rel="stylesheet" href="invitado.css" />
</head>
<body>
  <header class="encabezado">
    <h1>LATOSOS CO</h1>
    <img src="GuardianIcon.png" alt="Escudo" class="icono-escudo" />
  </header>

  <main class="contenido">
    <section class="caja-principal">
      <div class="barra-superior">
        <button class="btn-regresar" onclick="window.location.href='seleccion_usuario.html'">&#8592;</button>
        <div class="busqueda">
          <input type="text" placeholder="Ingrese lo que desee buscar" id="searchInput" onkeyup="searchTable()" />
            <img class="icono-busqueda" src="Casco invitado.png" />
            <span class="btn-cerrar">×</span>
          </div>          
      </div>

      <div class="info-inventario">
        <div>
          <p class="id-label">ID del Inventario:</p>
          <div class="id-contenedor">
            <span id="inventoryID">23DT53Y7U6</span>
            <button onclick="copiarID()">📋</button>
          </div>
        </div>
        <div>
          <p class="descripcion-label">Descripción:</p>
          <p class="descripcion-texto">
            El inventario de latas registra y gestiona el stock disponible para garantizar un control eficiente.
            Contiene datos detallados sobre tipos, cantidades y ubicaciones, facilitando el seguimiento y
            reposición. Con este sistema, se optimiza el almacenamiento, reduciendo pérdidas y mejorando la
            distribución según la demanda y necesidades operativas.
          </p>
        </div>
      </div>

      <div class="tabla-container">
        <table>
          <thead>
            <tr>
              <th>ID Producto</th>
              <th>Nombre</th>
              <th>Descripción</th>
              <th>Cantidad Disp.</th>
              <th>Cantidad Mín.</th>
              <th>Cantidad Máx.</th>
              <th>Unidad de Medida</th>
              <th>Precio Unitario</th>
              <th>Costo Unitario</th>
              <th>Código de Barras</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>12345</td>
              <td>Latas de Tomate</td>
              <td>Latas entomatadas</td>
              <td>30</td>
              <td>50</td>
              <td>100</td>
              <td>Unidades</td>
              <td>30</td>
              <td>25</td>
              <td></td>
            </tr>
            <tr>
              <td>84356</td>
              <td>Latas de Elote</td>
              <td>Latas con granos de elote</td>
              <td>60</td>
              <td>50</td>
              <td>100</td>
              <td>Unidades</td>
              <td>30</td>
              <td>20</td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <script>
    function copiarID() {
      const id = document.getElementById("inventoryID").innerText;
      navigator.clipboard.writeText(id);
    }
  </script>
  <script>
    function copiarID() {
      const id = document.getElementById("inventoryID").innerText;
      navigator.clipboard.writeText(id);
    }
  
    function searchTable() {
      const input = document.getElementById("searchInput");
      const filter = input.value.toLowerCase();
      const table = document.querySelector("table");
      const tr = table.getElementsByTagName("tr");
  
      for (let i = 1; i < tr.length; i++) {
        let visible = false;
        const td = tr[i].getElementsByTagName("td");
        for (let j = 0; j < td.length; j++) {
          if (td[j].innerText.toLowerCase().includes(filter)) {
            visible = true;
            break;
          }
        }
        tr[i].style.display = visible ? "" : "none";
      }
    }
  </script>
  <script>
    async function cargarInventario(idInventario) {
      try {
        const respuesta = await fetch(`/inventario${idInventario}`);
        if (!respuesta.ok) {
          throw new Error("Inventario no encontrado");
        }
    
        const inventario = await respuesta.json();
    
        // Cambiar el ID del inventario
        document.getElementById("inventoryID").innerText = inventario.ID_Inventario;
    
        // Cambiar el encabezado (si es necesario cambiar el título principal)
        document.querySelector("header h1").innerText = inventario.Nombre;
    
        // Cambiar la descripción
        document.querySelector(".descripcion-texto").innerText = inventario.Descripción;
    
        // Vaciar el tbody actual
        const tbody = document.querySelector("table tbody");
        tbody.innerHTML = "";
    
        // Llenar la tabla con los productos
        inventario.Productos.forEach(producto => {
          const fila = document.createElement("tr");
    
          fila.innerHTML = `
            <td>${producto.ID_Producto || ""}</td>
            <td>${producto.Nombre || ""}</td>
            <td>${producto.Descripción || ""}</td>
            <td>${producto.Cantidad_Disponible || 0}</td>
            <td>${producto.Cantidad_Minima || 0}</td>
            <td>${producto.Cantidad_Maxima || 0}</td>
            <td>${producto.Unidad_Medida || ""}</td>
            <td>${producto.Precio_Unitario || 0}</td>
            <td>${producto.Costo_Unitario || 0}</td>
            <td>${producto.Codigo_Barras || ""}</td>
          `;
    
          tbody.appendChild(fila);
        });
      } catch (error) {
        console.error("Error al cargar el inventario:", error);
        alert("No se pudo cargar el inventario.");
      }
    }
    
    // Ejemplo: cargar el inventario con ID '23DT53Y7U6' al cargar la página
    window.onload = () => {
      cargarInventario("0-A");
    };
    </script>
    
  
</body>
</html>
